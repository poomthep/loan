<!doctype html>
<html lang="th"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Admin Console</title>
<link rel="stylesheet" href="/public/css/styles.css"/>
<script type="module">
  import { registerServiceWorker } from './sw-register.js';
  import { startSessionGuard } from './js/session-guard.js';
  import { handleAuthUI } from './js/auth.js';
  import { initAdminPage } from './js/admin.js';
  import { initAdminPromotionsAdvanced } from './js/admin-promotions.js';
  import { initAdminRules } from './js/admin-rules.js';
  registerServiceWorker?.(); startSessionGuard?.(); handleAuthUI?.(); initAdminPage?.();
  initAdminPromotionsAdvanced(); initAdminRules();
</script>
</head><body>
<div class="container">
  <div class="card toolbar">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">จัดการอัตรา MRR (เร็ว)</h3>
      <button id="btn-refresh-mrr" class="btn">↻ รีเฟรช</button>
    </div>
    <div class="table-wrap" style="margin-top:8px">
      <table>
        <thead><tr><th>ธนาคาร</th><th>MRR</th><th>การทำงาน</th></tr></thead>
        <tbody id="banks-body"></tbody>
      </table>
    </div>
  </div>

  <div class="card toolbar">
    <div class="row" style="gap:8px">
      <input id="new-title" placeholder="ชื่อโปร (เช่น ดอกพิเศษ)"/>
      <textarea id="new-detail" placeholder="รายละเอียด" style="flex:1"></textarea>
      <select id="new-product"><option>MORTGAGE</option><option>PERSONAL</option><option>SME</option><option>REFINANCE</option></select>
      <label class="row"><input id="new-active" type="checkbox" checked/> เปิดใช้งาน</label>
      <button id="btn-promo-add" class="btn">+ เพิ่มโปร</button>
      <button id="btn-promo-refresh" class="btn outline">↻ รีเฟรช</button>
    </div>
    <div class="row muted" style="margin-top:6px">* บนมือถือจะแสดงคอลัมน์หลัก (ธนาคาร/ผลิตภัณฑ์/ชื่อ/เปิดใช้) — รายละเอียดอื่นกด “เพิ่มเติม”</div>
    <div class="table-wrap" style="margin-top:8px">
      <table>
        <thead>
          <tr>
            <th class="col-bank">ธนาคาร</th>
            <th class="col-product">ผลิตภัณฑ์</th>
            <th class="col-title">ชื่อโปร</th>
            <th class="col-detail">รายละเอียด</th>
            <th class="col-discount">ส่วนลด (bps)</th>
            <th class="col-fixedRate">คงที่ (%)</th>
            <th class="col-fixedMonths">เดือนคงที่</th>
            <th class="col-ltv">LTV override</th>
            <th class="col-start">เริ่ม</th>
            <th class="col-end">จบ</th>
            <th class="col-active">เปิดใช้</th>
            <th class="col-actions">การทำงาน</th>
          </tr>
        </thead>
        <tbody id="promo-body"></tbody>
      </table>
    </div>
  </div>

  <div class="card toolbar">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">กติกาธนาคาร (DSR/LTV/อายุ)</h3>
      <div class="row"><button id="btn-rules-add" class="btn">+ เพิ่ม</button><button id="btn-rules-refresh" class="btn outline">↻ รีเฟรช</button></div>
    </div>
    <div class="table-wrap" style="margin-top:8px">
      <table>
        <thead>
          <tr>
            <th>ธนาคาร</th>
            <th class="col-product">ผลิตภัณฑ์</th>
            <th class="col-prop">ทรัพย์</th>
            <th class="col-home">บ้านหลัง</th>
            <th>DSR cap</th>
            <th class="col-ltv">LTV cap</th>
            <th>ผ่อนสูงสุด (ปี)</th>
            <th>อายุสูงสุดเมื่อผ่อนครบ</th>
            <th class="col-mininc">รายได้ขั้นต่ำ</th>
            <th>การทำงาน</th>
          </tr>
        </thead>
        <tbody id="rules-body"></tbody>
      </table>
    </div>
  </div>
</div>
</body></html>
